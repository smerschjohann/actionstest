name: GitHub Actions Demo
on: [push]
jobs:
  play-with-secrets:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ./.github/actions/get_secrets
        with:
          SECRET_PARAM: "${{ secrets.SECRET1 }}"
      - run: |
          echo ok this is working fine
          echo our secret values: ${{ env.SECRET_GEN1 }}
          echo our secret values: ${SECRET_GEN2}
          echo base64 $(echo $SECRET_GEN2 | base64)

  call_workflow:
    needs:
      - play-with-secrets
    uses: smerschjohann/actionstest/.github/workflows/service-version-updated.yaml
    with:
      service: test
      version: 1.2.3
